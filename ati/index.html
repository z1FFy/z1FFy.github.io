<html>
<head>
	<title>ati.su Compaigns</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
	<style> body {  padding: 5%;padding-top: 2%;  } </style>
	<script>
		$(document).ready(function(){
			$.get(
				"data/idlist.json",
				onAjaxSuccess
			);

			function onAjaxSuccess(data) {
				renderTable(data);
			}
			function renderTable(data) {
				pageCount = Object.keys(data).length;
				hash = window.location.hash;
				if (hash >= 1 && hash<=pageCount) {
					pageNumber = hash.slice(-1,2);
				} else {
					pageNumber = 1;
				}
				data = data[pageNumber];
				$.each(data, function(index, value) {
						$('#list tbody').append('<tr><td><a target="_blank" href="data/cards/'+index+'.html">'+
								'<button type="button" class="btn btn-primary">Открыть</button></a>' + value.name + '</td>'+
								'<td>' + value.city + '</td>'+
								'<td>' + value.profile + '</td>'+
								'<td>' + index + '</td>'
						);
				});

				for (i=1;i<=pageCount;i++) {
					$('#pagi').append('<li><a href="#'+ i + '">'+ i  +' </a></li>');
				}
				$('#prev').attr('href','#'+pageNumber-1);
				$('#next').attr('href','#'+pageNumber+1);
			}
		});
	</script>
</head>
<body>
<header>
	<h1>ati.su Compaign List</h1>
</header>
<ul id="pagi" class="pagination pagination-lg">
	<li><a id="prev" href="" aria-label="Previous"><span aria-hidden="true">«</span></a></li>
	<li><a id="next" href="" aria-label="Next"><span aria-hidden="true">»</span></a></li>
</ul>
<table id="list" class="table table-hover table-bordered">
	<tbody>
	<tr><td>Компания</td>
		<td>Город</td>
		<td>Деятельность</td>
		<td>ID</td></tr>
	</tbody>
</table>

</body>
</html>